/*
 @package   AkeebaEngage
 @copyright Copyright (c)2020-2022 Nicholas K. Dionysopoulos / Akeeba Ltd
 @license   GNU General Public License version 3, or later
*/
if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Engage&&(akeeba.Engage={});"undefined"==typeof akeeba.Engage.Comments&&(akeeba.Engage.Comments={});akeeba.Engage.Comments.getElementFromEvent=function(a){var b=null;"object"===typeof a.target?b=a.target:"object"===typeof a.srcElement&&(b=a.srcElement);return b};akeeba.Engage.Comments.getAssetIdFromEvent=function(a){a=akeeba.Engage.Comments.getElementFromEvent(a);return null===a?0:akeeba.System.data.get(a,"akengageid","0")};
akeeba.Engage.Comments.onEditButton=function(a){a.preventDefault();a=akeeba.Engage.Comments.getAssetIdFromEvent(a);window.location=akeeba.System.getOptions("akeeba.Engage.Comments.editURL")+encodeURIComponent(a)+"&"+akeeba.System.getOptions("csrf.token")+"=1&returnurl="+encodeURIComponent(akeeba.System.getOptions("akeeba.Engage.Comments.returnURL","index.php"))};
akeeba.Engage.Comments.onDeleteButton=function(a){a.preventDefault();confirm(akeeba.System.Text._("COM_ENGAGE_COMMENTS_DELETE_PROMPT"))&&(a=akeeba.Engage.Comments.getAssetIdFromEvent(a),window.location=akeeba.System.getOptions("akeeba.Engage.Comments.deleteURL")+encodeURIComponent(a)+"&"+akeeba.System.getOptions("csrf.token")+"=1&returnurl="+encodeURIComponent(akeeba.System.getOptions("akeeba.Engage.Comments.returnURL","index.php")))};
akeeba.Engage.Comments.onPublishButton=function(a){a.preventDefault();a=akeeba.Engage.Comments.getAssetIdFromEvent(a);window.location=akeeba.System.getOptions("akeeba.Engage.Comments.publishURL")+encodeURIComponent(a)+"&"+akeeba.System.getOptions("csrf.token")+"=1&returnurl="+encodeURIComponent(akeeba.System.getOptions("akeeba.Engage.Comments.returnURL","index.php"))};
akeeba.Engage.Comments.onUnpublishButton=function(a){a.preventDefault();a=akeeba.Engage.Comments.getAssetIdFromEvent(a);window.location=akeeba.System.getOptions("akeeba.Engage.Comments.unpublishURL")+encodeURIComponent(a)+"&"+akeeba.System.getOptions("csrf.token")+"=1&returnurl="+encodeURIComponent(akeeba.System.getOptions("akeeba.Engage.Comments.returnURL","index.php"))};
akeeba.Engage.Comments.onMarkHamButton=function(a){a.preventDefault();a=akeeba.Engage.Comments.getAssetIdFromEvent(a);window.location=akeeba.System.getOptions("akeeba.Engage.Comments.markhamURL")+encodeURIComponent(a)+"&"+akeeba.System.getOptions("csrf.token")+"=1&returnurl="+encodeURIComponent(akeeba.System.getOptions("akeeba.Engage.Comments.returnURL","index.php"))};
akeeba.Engage.Comments.onMarkSpamButton=function(a){a.preventDefault();a=akeeba.Engage.Comments.getAssetIdFromEvent(a);window.location=akeeba.System.getOptions("akeeba.Engage.Comments.markspamURL")+encodeURIComponent(a)+"&"+akeeba.System.getOptions("csrf.token")+"=1&returnurl="+encodeURIComponent(akeeba.System.getOptions("akeeba.Engage.Comments.returnURL","index.php"))};
akeeba.Engage.Comments.onMarkPossibleSpamButton=function(a){a.preventDefault();a=akeeba.Engage.Comments.getAssetIdFromEvent(a);window.location=akeeba.System.getOptions("akeeba.Engage.Comments.possiblespamURL")+encodeURIComponent(a)+"&"+akeeba.System.getOptions("csrf.token")+"=1&returnurl="+encodeURIComponent(akeeba.System.getOptions("akeeba.Engage.Comments.returnURL","index.php"))};
akeeba.Engage.Comments.onReplyButton=function(a){a.preventDefault();var b=akeeba.Engage.Comments.getElementFromEvent(a);if(null===b)return!1;akeeba.Engage.Comments.unhideReplyArea();a=1*akeeba.System.data.get(b,"akengageid",0);b=akeeba.System.data.get(b,"akengagereplyto",0);var c=document.forms.akengageCommentForm,d=document.getElementById("akengage-comment-inreplyto-wrapper");c.parent_id.value=a;d.style.display="none";0!==a&&(document.getElementById("akengage-comment-inreplyto-name").innerText=b,
d.style.display="block");document.location.hash="";document.location.hash="#akengageCommentForm"};akeeba.Engage.Comments.onCancelReplyButton=function(a){a.preventDefault();a=document.forms.akengageCommentForm;var b=document.getElementById("akengage-comment-inreplyto-wrapper"),c=document.getElementById("akengage-comment-inreplyto-name");a.parent_id.value=0;b.style.display="none";c.innerText=""};
akeeba.Engage.Comments.saveCommenterInfo=function(a){if("undefined"!==typeof window.localStorage){a=window.localStorage.getItem("engageGuestComment_name");var b=window.localStorage.getItem("engageGuestComment_email");window.localStorage.removeItem("engageGuestComment_name");window.localStorage.removeItem("engageGuestComment_email");var c=document.getElementById("akengage-comment-form-saveinfo");if(c instanceof Element&&c.checked){var d=document.getElementById("akengage-comment-form-name");c=document.getElementById("akengage-comment-form-email");
if(d instanceof Element&&c instanceof Element){d=d.value;c=c.value;if(null===a||null===b)a=d,b=c;d!==a||c!==b||""===d||""===c?(window.localStorage.removeItem("engageGuestComment_name"),window.localStorage.removeItem("engageGuestComment_email")):(window.localStorage.setItem("engageGuestComment_name",d),window.localStorage.setItem("engageGuestComment_email",c))}}}};
akeeba.Engage.Comments.loadCommenterInfo=function(){if("undefined"!==typeof window.localStorage){var a=window.localStorage.getItem("engageGuestComment_name"),b=window.localStorage.getItem("engageGuestComment_email");if(""===a||""===b||null===a||null===b)b=a="";var c=document.getElementById("akengage-comment-form-name"),d=document.getElementById("akengage-comment-form-email");c instanceof Element&&d instanceof Element&&(""==c.value&&""==d.value&&(c.value=a,d.value=b),""!==a&&""!==b&&(a=document.getElementById("akengage-comment-form-saveinfo"),
a instanceof Element&&a.setAttribute("checked","checked")))}};akeeba.Engage.Comments.onHiderButton=function(a){akeeba.Engage.Comments.unhideReplyArea()};akeeba.Engage.Comments.unhideReplyArea=function(){var a=document.getElementById("akengage-comment-form"),b=document.getElementById("akengage-comment-hider");a.style.display="";b&&(b.style.display="none")};
akeeba.Loader.add(["akeeba.System"],function(){akeeba.System.iterateNodes("button.akengage-comment-edit-btn",function(a){akeeba.System.addEventListener(a,"click",akeeba.Engage.Comments.onEditButton)});akeeba.System.iterateNodes("button.akengage-comment-delete-btn",function(a){akeeba.System.addEventListener(a,"click",akeeba.Engage.Comments.onDeleteButton)});akeeba.System.iterateNodes("button.akengage-comment-reply-btn",function(a){akeeba.System.addEventListener(a,"click",akeeba.Engage.Comments.onReplyButton)});
akeeba.System.iterateNodes("button.akengage-comment-unpublish-btn",function(a){akeeba.System.addEventListener(a,"click",akeeba.Engage.Comments.onUnpublishButton)});akeeba.System.iterateNodes("button.akengage-comment-publish-btn",function(a){akeeba.System.addEventListener(a,"click",akeeba.Engage.Comments.onPublishButton)});akeeba.System.iterateNodes("button.akengage-comment-markham-btn",function(a){akeeba.System.addEventListener(a,"click",akeeba.Engage.Comments.onMarkHamButton)});akeeba.System.iterateNodes("button.akengage-comment-markspam-btn",
function(a){akeeba.System.addEventListener(a,"click",akeeba.Engage.Comments.onMarkSpamButton)});akeeba.System.iterateNodes("button.akengage-comment-possiblespam-btn",function(a){akeeba.System.addEventListener(a,"click",akeeba.Engage.Comments.onMarkPossibleSpamButton)});akeeba.System.addEventListener("akengage-comment-inreplyto-cancel","click",akeeba.Engage.Comments.onCancelReplyButton);akeeba.System.addEventListener("akengageCommentForm","submit",akeeba.Engage.Comments.saveCommenterInfo);akeeba.System.addEventListener("akengage-comment-hider-button",
"click",akeeba.Engage.Comments.onHiderButton);akeeba.Engage.Comments.loadCommenterInfo()}); //# sourceMappingURL=comments.min.map
